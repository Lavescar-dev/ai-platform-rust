<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="noindex, nofollow">
    <title>Text-to-Speech - Nexus AI</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; background: #0f0f23; color: #e0e0e0; min-height: 100vh; }
        .nav { padding: 16px 24px; border-bottom: 1px solid #1a1a2e; display: flex; align-items: center; gap: 8px; }
        .nav a { color: #00d9ff; text-decoration: none; font-size: 14px; }
        .nav span { color: #666; }
        .container { max-width: 800px; margin: 0 auto; padding: 40px 20px; }
        h1 { color: #00d9ff; margin-bottom: 24px; font-size: 28px; }
        label { display: block; margin-bottom: 6px; color: #999; font-size: 13px; }
        textarea, select { width: 100%; background: #1a1a2e; border: 1px solid #333; color: #e0e0e0; padding: 12px; border-radius: 6px; font-size: 14px; font-family: inherit; }
        textarea { resize: vertical; min-height: 100px; }
        textarea:focus, select:focus { outline: none; border-color: #00d9ff; }
        .form-row { display: grid; grid-template-columns: 1fr 1fr; gap: 16px; margin-top: 16px; }
        .form-group { margin-bottom: 16px; }
        .rate-display { color: #00d9ff; font-size: 13px; margin-left: 8px; }
        input[type="range"] { width: 100%; accent-color: #00d9ff; }
        .btn { background: #00d9ff; color: #0f0f23; border: none; padding: 12px 24px; border-radius: 6px; cursor: pointer; font-size: 14px; font-weight: 600; margin-top: 16px; }
        .btn:hover { background: #00b8d4; }
        .btn:disabled { opacity: 0.5; cursor: not-allowed; }
        .output { margin-top: 24px; background: #1a1a2e; border-radius: 8px; padding: 24px; }
        audio { width: 100%; margin-top: 12px; }
        .error { color: #ff4444; margin-top: 12px; }
        .spinner { display: none; width: 24px; height: 24px; border: 3px solid #333; border-top-color: #00d9ff; border-radius: 50%; animation: spin 0.8s linear infinite; margin: 12px auto; }
        @keyframes spin { to { transform: rotate(360deg); } }
    </style>
</head>
<body>
    <div class="nav">
        <a href="/">Nexus AI</a><span>/</span><span>Text-to-Speech</span>
    </div>
    <div class="container">
        <h1>Text-to-Speech</h1>
        <div class="form-group">
            <label>Text to Synthesize</label>
            <textarea id="text" placeholder="Enter the text you want to convert to speech..."></textarea>
        </div>
        <div class="form-row">
            <div class="form-group">
                <label>Voice</label>
                <select id="voice"><option>Loading voices...</option></select>
            </div>
            <div class="form-group">
                <label>Rate <span class="rate-display" id="rateDisplay">1.0x</span></label>
                <input type="range" id="rate" min="0.5" max="2.0" step="0.1" value="1.0" oninput="document.getElementById('rateDisplay').textContent=this.value+'x'">
            </div>
        </div>
        <button class="btn" id="synthBtn" onclick="synthesize()">Synthesize Speech</button>
        <div class="error" id="error"></div>
        <div class="output" id="output" style="display:none">
            <div class="spinner" id="spinner"></div>
            <audio id="audioPlayer" controls></audio>
        </div>
    </div>
    <div style="position:fixed;bottom:8px;right:8px;background:rgba(0,0,0,0.7);color:#fff;padding:4px 12px;border-radius:4px;font-size:11px;z-index:9999;pointer-events:none;">DEMO | lavescar.com.tr</div>
    <script>
    async function loadVoices() {
        try {
            const res = await fetch('/voice/api/voices');
            const data = await res.json();
            const select = document.getElementById('voice');
            select.innerHTML = data.voices.map(v => `<option value="${v.name}">${v.name} (${v.locale}, ${v.gender})</option>`).join('');
        } catch(e) { console.error('Failed to load voices:', e); }
    }
    async function synthesize() {
        const text = document.getElementById('text').value.trim();
        if (!text) return;
        const btn = document.getElementById('synthBtn');
        const spinner = document.getElementById('spinner');
        const output = document.getElementById('output');
        const audio = document.getElementById('audioPlayer');
        const error = document.getElementById('error');
        btn.disabled = true; error.textContent = '';
        output.style.display = 'block'; spinner.style.display = 'block'; audio.style.display = 'none';
        try {
            const res = await fetch('/voice/api/synthesize', {
                method: 'POST', headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ text, voice: document.getElementById('voice').value, rate: parseFloat(document.getElementById('rate').value) })
            });
            if (!res.ok) { const err = await res.json(); throw new Error(err.error || 'Request failed'); }
            const data = await res.json();
            audio.src = data.audio; audio.style.display = 'block';
        } catch(e) { error.textContent = 'Error: ' + e.message; }
        finally { btn.disabled = false; spinner.style.display = 'none'; }
    }
    loadVoices();
    </script>

    <script defer src="https://lavescar.com.tr/static/bridge.js"></script>

</body>
</html>
